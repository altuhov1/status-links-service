:8080 {
   
    encode zstd gzip

    log {
        output file /var/log/caddy/access.log {
            roll_size 100MiB
            roll_keep 5
            roll_keep_for 168h
        }
        format json
    }

    reverse_proxy http://app:8080

    handle_errors {
        respond "{err.status_code} {err.status_text}" 503
    }
}